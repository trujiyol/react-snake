(this["webpackJsonpreact-snake"]=this["webpackJsonpreact-snake"]||[]).push([[0],[,,,,,,,,function(e,t,i){},,function(e,t,i){e.exports=i.p+"static/media/logo.5d5d9eef.svg"},function(e,t,i){e.exports=i(23)},,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s),a=i(9),o=i.n(a),r=(i(16),i(1)),c=i(2),h=i(4),l=i(3),d=i(5),u=i(6),m=(i(17),function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.index%2==0?n.a.createElement("div",{className:"gridsquare colorA"}):n.a.createElement("div",{className:"gridsquare colorB"})}}]),t}(n.a.Component)),p=(i(18),function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(h.a)(this,Object(l.a)(t).call(this,e))).message="",i.visible=!0,i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"renderMessageBox",value:function(){switch(this.props.gamelogic.gameState){case this.props.gamelogic.STATE.PAUSED:this.message="Game Paused",this.visible=!0;break;case this.props.gamelogic.STATE.GAMEOVER:this.message="Game Over",this.visible=!0;break;case this.props.gamelogic.STATE.INITIAL:this.message="Press Enter to Play",this.visible=!0;break;default:this.message=null,this.visible=!1}}},{key:"render",value:function(){return this.renderMessageBox(),this.visible?n.a.createElement("div",{className:"container seen"},n.a.createElement("div",{className:"messagebox"},this.message)):n.a.createElement("div",{className:"container  hidden"},n.a.createElement("div",{className:"messagebox"},this.message))}}]),t}(n.a.Component)),g=(i(8),function(e){function t(e){return Object(r.a)(this,t),Object(h.a)(this,Object(l.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={position:"absolute",height:this.props.size,width:this.props.size,top:this.props.y,left:this.props.x,zIndex:this.props.zindex};return n.a.createElement("div",{className:"snakesegment",style:e})}}]),t}(n.a.Component)),v=function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"generateSnakeSegments",value:function(){var e=this,t=[],i=0;return this.props.gamelogic.snake.positions.forEach((function(s){i++;var a=s[0]/e.props.gamelogic._rows*100+"%",o=s[1]/e.props.gamelogic._cols*100+"%",r=1/e.props.gamelogic._rows*100+"%",c=s[0];t.push(n.a.createElement(g,{key:i,x:o,y:a,size:r,zindex:c}))})),t}},{key:"render",value:function(){return n.a.createElement("div",{className:"snakecontainer"},this.generateSnakeSegments())}}]),t}(n.a.Component),f=function(){function e(t,i){Object(r.a)(this,e),this._gamespeed=200,this.STATE={INITIAL:0,PAUSED:1,GAMEOVER:2,PLAYING:3},this.direction={left:[0,-1],right:[0,1],up:[-1,0],down:[1,0],none:[0,0]},this.grid=[],this.snake={positions:[],direction:this.direction.right},this.token=[],this._rows=t,this._cols=i,this.gameState=this.STATE.INITIAL,this.initialiseGame(),this.startGame=this.startGame.bind(this),this.onKeyPressed=this.onKeyPressed.bind(this),this.updateGame=this.updateGame.bind(this),document.addEventListener("keydown",this.onKeyPressed,!1),document.addEventListener("mousedown",this.startSwipe,!1),document.addEventListener("mousemove",this.detectSwipe,!1),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),this.moveLeft=this.moveLeft.bind(this),this.moveRight=this.moveRight.bind(this),document.addEventListener("swipeLeft",this.moveLeft),document.addEventListener("swipeRight",this.moveRight),document.addEventListener("swipeDown",this.moveDown),document.addEventListener("swipeUp",this.moveUp),document.addEventListener("tapGrid",this.startGame);new CustomEvent("madeBlue")}return Object(c.a)(e,[{key:"initialiseGrid",value:function(){this.grid=[];for(var e=0;e<this._rows;e++){for(var t=[],i=0;i<this._cols;i++)t.push(0);this.grid.push(t)}}},{key:"initialisesnake",value:function(){var e=Math.floor(Math.random()*this._cols),t=Math.floor(Math.random()*this._rows);this.snake.positions=[[e,t]],this.snake.positions.push([e,t+1])}},{key:"updateGrid",value:function(){var e=this;this.snake.positions.forEach((function(t){e.grid[t[0]][t[1]]=1})),this.grid[this.token[0]][this.token[1]]=2,this.onUpdate&&this.onUpdate()}},{key:"updateSnake",value:function(){var e=[0,0];e[0]=this.snake.positions[0][0],e[1]=this.snake.positions[0][1],e[0]+=this.snake.direction[0],e[1]+=this.snake.direction[1],e[0]=e[0]<0?this._cols-1:e[0],e[1]=e[1]<0?this._rows-1:e[1],e[0]=e[0]%this._cols,e[1]=e[1]%this._rows;var t=this.snake.positions.pop();this.grid[t[0]][t[1]]=0,this.snake.positions.unshift(e)}},{key:"updateGame",value:function(){this.updateSnake(),this.evaluateGrid(),this.updateGrid()}},{key:"placeToken",value:function(){var e,t;do{t=Math.floor(Math.random()*this._cols),e=Math.floor(Math.random()*this._rows)}while(1==this.grid[t][e]);this.token=[t,e]}},{key:"evaluateGrid",value:function(){var e=this.snake.positions[0];e[0]==this.token[0]&&e[1]==this.token[1]?(this.score++,this.snake.positions.push(e),this.placeToken()):1==this.grid[e[0]][e[1]]&&this.gameOver()}},{key:"initialiseGame",value:function(){this.score=0,this.gameState=this.STATE.INITIAL,this.initialiseGrid(),this.initialisesnake(),this.placeToken(),this.updateGrid()}},{key:"toggleGame",value:function(){switch(this.gameState){case this.STATE.PLAYING:this.pauseGame();break;case this.STATE.INITIAL:case this.STATE.PAUSED:this.startGame();break;case this.STATE.GAMEOVER:this.initialiseGame()}}},{key:"gameOver",value:function(){clearInterval(this.timer),this.gameState=this.STATE.GAMEOVER,this.onUpdate()}},{key:"pauseGame",value:function(){clearInterval(this.timer),this.gameState=this.STATE.PAUSED,this.onUpdate()}},{key:"startGame",value:function(){this.gameState!=this.STATE.PLAYING&&(this.timer=setInterval(this.updateGame,this._gamespeed),this.gameState=this.STATE.PLAYING,this.onUpdate())}},{key:"onKeyPressed",value:function(e){switch(e.keyCode){case 37:this.moveLeft();break;case 38:this.moveUp();break;case 39:this.moveRight();break;case 40:this.moveDown();break;case 13:this.toggleGame()}}},{key:"moveLeft",value:function(){this.snake.direction!=this.direction.right&&(this.snake.direction=this.direction.left)}},{key:"moveUp",value:function(){this.snake.direction!=this.direction.down&&(this.snake.direction=this.direction.up)}},{key:"moveRight",value:function(){this.snake.direction!=this.direction.left&&(this.snake.direction=this.direction.right)}},{key:"moveDown",value:function(){this.snake.direction!=this.direction.up&&(this.snake.direction=this.direction.down)}}]),e}(),k=(i(19),function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(h.a)(this,Object(l.a)(t).call(this,e)))._previousScore=i.props.score,i._counter=0,i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this._previousScore!=this.props.score&&(this._counter++,this._previousScore=this.props.score),this._counter%2?n.a.createElement("div",{className:"scorecounter pulsea"},this.props.score):n.a.createElement("div",{className:"scorecounter pulseb"},this.props.score)}}]),t}(n.a.Component)),b=(i(20),function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.gamelogic.token,t=e[0]/this.props.gamelogic._rows*100+"%",i=e[1]/this.props.gamelogic._cols*100+"%",s=1/this.props.gamelogic._rows*100+"%",a={position:"absolute",height:s,width:s,top:t,left:i};return n.a.createElement("div",{className:"tokencontainer"},n.a.createElement("div",{className:"token",style:a}))}}]),t}(n.a.Component)),E=function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(h.a)(this,Object(l.a)(t).call(this,e))).currentFingerPosition=[],i.lastFingerPosition=[],i.isFingerDown=!1,i.detectSwipe=i.detectSwipe.bind(Object(u.a)(i)),i.startSwipe=i.startSwipe.bind(Object(u.a)(i)),i.onTap=i.onTap.bind(Object(u.a)(i)),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onTap",value:function(){console.log("tapped");var e=new Event("tapGrid");document.dispatchEvent(e)}},{key:"startSwipe",value:function(e){this.lastFingerPosition=[e.clientX,e.clientY],this.isFingerDown=!0}},{key:"detectSwipe",value:function(e){if(this.isFingerDown){this.currentFingerPosition=[e.clientX,e.clientY];var t=(this.currentFingerPosition[0]-this.lastFingerPosition[0])/window.screen.width,i=(this.currentFingerPosition[1]-this.lastFingerPosition[1])/window.screen.width;if(t>.05){this.isFingerDown=!1;var s=new Event("swipeRight");document.dispatchEvent(s)}else if(t<-.05){var n=new Event("swipeLeft");document.dispatchEvent(n),this.isFingerDown=!1}else if(i>.05){var a=new Event("swipeDown");document.dispatchEvent(a),this.isFingerDown=!1}else if(i<-.05){var o=new Event("swipeUp");document.dispatchEvent(o),this.isFingerDown=!1}}}},{key:"render",value:function(){return n.a.createElement("div",{style:{position:"absolute",height:"100%",width:"100%"},onMouseDown:this.startSwipe,onMouseMove:this.detectSwipe,onClick:this.onTap})}}]),t}(n.a.Component),w=(i(21),function(e){function t(e){return Object(r.a)(this,t),Object(h.a)(this,Object(l.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"pausebutton",onClick:this.props.onclick},"||")}}]),t}(n.a.Component)),O=(i(22),i(10)),y=i.n(O),j=function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={gamelogic:new f(i.props.rows,i.props.cols)},i.state.gamelogic.onUpdate=i.updateReactState.bind(Object(u.a)(i)),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateReactState",value:function(){this.setState({gamelogic:this.state.gamelogic})}},{key:"renderGrid",value:function(){for(var e=[],t=(this.state.gamelogic.grid.length,this.state.gamelogic.grid[0].length,0),i=0;t<this.state.gamelogic.grid.length;t++)for(var s=0;s<this.state.gamelogic.grid[t].length;s++,i++){this.state.gamelogic.grid[t][s];e.push(n.a.createElement(m,{key:i,index:i}))}return e}},{key:"render",value:function(){var e={width:this.props.width,height:this.props.height},t={gridTemplateColumns:"repeat("+this.props.cols+", 1fr)",gridTemplateRows:"repeat("+this.props.rows+", 1fr)"};return n.a.createElement("div",null,n.a.createElement("div",{id:"gameContainer",style:e},n.a.createElement("div",{id:"hud"},n.a.createElement("div",{id:"hud-left"},n.a.createElement("img",{src:y.a,style:{width:"30%"}}),n.a.createElement("b",null,"React Snake")),n.a.createElement("div",{id:"hud-middle"},n.a.createElement(k,{score:this.state.gamelogic.score})),n.a.createElement("div",{id:"hud-right"},n.a.createElement(w,{onclick:this.state.gamelogic.toggleGame.bind(this.state.gamelogic)}))),n.a.createElement("div",{id:"topWall"},n.a.createElement("div",{className:"wallEnd"}),n.a.createElement("div",{className:"wallSideTop"})),n.a.createElement("div",{id:"leftWall"}),n.a.createElement("div",{id:"center"},n.a.createElement("div",{className:"grid",style:t},this.renderGrid(),n.a.createElement(v,{gamelogic:this.state.gamelogic}),n.a.createElement(b,{gamelogic:this.state.gamelogic}),n.a.createElement(p,{gamelogic:this.state.gamelogic}),n.a.createElement(E,null))),n.a.createElement("div",{id:"rightWall"}),n.a.createElement("div",{id:"bottomWall"},n.a.createElement("div",{className:"wallSideBottom"}),n.a.createElement("div",{className:"wallEnd"}))))}}]),t}(n.a.Component),S=function(e){function t(e){var i;return Object(r.a)(this,t),(i=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={date:new Date},i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(j,{rows:"19",cols:"19",height:"400px",width:"400px"}))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.09a5b6d2.chunk.js.map